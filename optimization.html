<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>TABRIZ | Optimizatsiya</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
    <h4 class="mb-3">5. Raskroy xaritasi (2800x2070)</h4>
    <canvas id="cv" width="2800" height="2070" style="width:100%; border:2px solid #000; background:#fff;"></canvas>
    
    

    <div class="mt-3 text-end">
        <button onclick="location.href='report.html'" class="btn btn-success btn-lg">HISOBOTNI KO'RISH</button>
    </div>
    <script>
        const ctx = document.getElementById('cv').getContext('2d');
        const data = JSON.parse(localStorage.getItem('details'));
        let x=20, y=20, rH=0;
        ctx.fillStyle="#fff"; ctx.fillRect(0,0,2800,2070);
        data.forEach(d => {
            for(let i=0; i<d.s; i++) {
                let dw = parseInt(d.w), dh = parseInt(d.h);
                if(x + dw > 2780) { x=20; y += rH+20; rH=0; }
                ctx.strokeStyle="#e24329"; ctx.lineWidth=5;
                ctx.strokeRect(x, y, dw, dh);
                if(dh > rH) rH = dh;
                x += dw + 10;
            }
        });
    </script>
</body>
</html>
